import java.time.LocalDateTime;

public class SchedulerAppMain {
    public static void main(String[] args) {
        SchedulerService service = new SchedulerService();

        User u1 = new User("u1", "Alice", "alice@example.com", "admin");
        User u2 = new User("u2", "Bob", "bob@example.com", "editor");
        service.addUser(u1);
        service.addUser(u2);

        Channel tw = new TwitterChannel("ch1", 5);
        Channel li = new LinkedInChannel("ch2", 3);
        service.addChannel(tw);
        service.addChannel(li);

        Post p1 = service.createPost("p1", "Hello Twitter World!", "ch1", "u1");
        Post p2 = service.createPost("p2", "Professional networking is key!", "ch2", "u2");

        service.schedule("p1");
        service.schedule("p2", LocalDateTime.now().plusSeconds(1));

        service.schedule("p1", LocalDateTime.now().plusSeconds(2), 2, 3);

        try { Thread.sleep(1500); } catch (InterruptedException e) {}

        service.runSchedulerNow();

        System.out.println("--- Posts by Twitter ---");
        for (Post p : service.listByChannel("ch1")) {
            System.out.println(p);
        }

        System.out.println("--- Published Posts ---");
        for (Post p : service.listByStatus(Post.Status.PUBLISHED)) {
            System.out.println(p);
        }

        service.printSummary();
    }
}